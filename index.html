function shareLocation() {
  if (navigator.geolocation) {
    document.getElementById('result').innerHTML = "<p>위치를 불러오는 중입니다...</p>";

    // 타임아웃 옵션 추가: 7초 내 위치 못 받으면 에러 처리
    navigator.geolocation.getCurrentPosition(showPosition, showError, {
      enableHighAccuracy: true,  // 정확도 높이기 (GPS 적극 활용)
      timeout: 7000,             // 7초 내로 못 받으면 바로 에러
      maximumAge: 0              // 캐시된 위치 사용 금지 (항상 새 위치)
    });

    // 10초 뒤 버튼 추가
    setTimeout(function(){
      if(document.getElementById('result').innerHTML.includes("위치를 불러오는 중입니다")){
        document.getElementById('result').innerHTML +=
        '<button onclick="retryAccess()">위치 정보가 나오지 않나요?</button>';
      }
    }, 10000);

  } else {
    alert("Geolocation이 지원되지 않는 브라우저입니다.");
  }
}

function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      alert("위치 접근 권한을 허용하지 않았습니다.");
      break;
    case error.POSITION_UNAVAILABLE:
      alert("위치 정보를 사용할 수 없습니다.");
      break;
    case error.TIMEOUT:
      alert("위치 정보를 가져오는 데 시간이 초과되었습니다. 다시 시도해 주세요.");
      break;
    default:
      alert("알 수 없는 오류가 발생했습니다.");
  }
  document.getElementById('result').innerHTML = "";
}

function retryAccess() {
  window.location.href = 'https://creditplacecheck.netlify.app';
}
